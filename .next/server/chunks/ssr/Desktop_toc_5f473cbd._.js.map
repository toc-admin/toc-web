{"version":3,"sources":["../../../../../../Desktop/toc/components/ProductCard.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useRef } from \"react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport gsap from \"gsap\"\n\ninterface ProductCardProps {\n  product: {\n    id: string\n    name: string\n    slug: string\n    short_description?: string | null\n    brand?: {\n      name: string\n    } | null\n    category?: {\n      name: string\n    } | null\n    subcategory?: string | null\n    is_new: boolean\n    is_featured: boolean\n    product_images?: Array<{\n      image_url: string\n      thumbnail_url?: string | null\n      is_primary: boolean\n    }>\n    product_features?: Array<{\n      feature_name: string\n    }>\n  }\n  index?: number\n  isInView?: boolean\n}\n\nconst ProductCard = ({ product, index = 0, isInView = true }: ProductCardProps) => {\n  const cardRef = useRef<HTMLDivElement>(null)\n  const hasAnimated = useRef(false)\n\n  // Get the primary image or first image\n  const primaryImage = product.product_images?.find(img => img.is_primary) || product.product_images?.[0]\n  const imageUrl = primaryImage?.thumbnail_url || primaryImage?.image_url\n\n  // Use a placeholder if no image is available\n  const hasImage = imageUrl && imageUrl.trim() !== ''\n\n  // GSAP animation with Intersection Observer\n  useEffect(() => {\n    const card = cardRef.current\n    if (!card) return\n\n    // Set initial state\n    gsap.set(card, {\n      opacity: 0,\n      y: 40,\n      scale: 0.95\n    })\n\n    // Create intersection observer with low threshold\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting && !hasAnimated.current) {\n            hasAnimated.current = true\n\n            // Animate in when in view\n            gsap.to(card, {\n              opacity: 1,\n              y: 0,\n              scale: 1,\n              duration: 0.8,\n              delay: (index % 12) * 0.08, // Stagger effect per batch of 12\n              ease: \"power3.out\"\n            })\n          }\n        })\n      },\n      {\n        threshold: 0.1, // Trigger when 10% of the element is visible\n        rootMargin: \"50px\" // Start animating 50px before element enters viewport\n      }\n    )\n\n    observer.observe(card)\n\n    return () => {\n      observer.disconnect()\n    }\n  }, [index])\n\n  return (\n    <div\n      ref={cardRef}\n      className=\"h-full\"\n    >\n      <Link href={`/products/${product.slug}`}>\n        <div className=\"group h-full flex flex-col bg-white border-2 border-gray-100 hover:border-red-700 transition-all duration-300 overflow-hidden hover:shadow-2xl cursor-pointer\">\n          {/* Product Image */}\n          <div className=\"relative w-full h-72 bg-gray-100 overflow-hidden\">\n            {hasImage ? (\n              <Image\n                src={imageUrl}\n                alt={product.name}\n                fill\n                className=\"object-cover transition-transform duration-700 group-hover:scale-110\"\n                sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                onError={(e) => {\n                  console.error('Image load error:', imageUrl, e)\n                }}\n                priority={index < 2}\n              />\n            ) : (\n              <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200\">\n                <svg className=\"w-20 h-20 text-gray-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <span className=\"text-sm text-gray-500 font-medium\">No Image Available</span>\n              </div>\n            )}\n\n            {/* Overlay on hover */}\n            <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-500\" />\n\n            {/* Badges */}\n            <div className=\"absolute top-4 left-4 flex flex-col gap-2\">\n              {product.is_new && (\n                <span className=\"px-3 py-1 bg-red-700 text-white text-xs font-bold uppercase tracking-wider\">\n                  New\n                </span>\n              )}\n              {product.is_featured && (\n                <span className=\"px-3 py-1 bg-black text-white text-xs font-bold uppercase tracking-wider\">\n                  Featured\n                </span>\n              )}\n            </div>\n\n            {/* Quick View Button - appears on hover */}\n            <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300\">\n              <button className=\"px-6 py-3 bg-white text-black font-semibold uppercase tracking-wider hover:bg-red-700 hover:text-white transition-all duration-300 shadow-lg\">\n                Quick View\n              </button>\n            </div>\n          </div>\n\n          {/* Product Info */}\n          <div className=\"flex-1 flex flex-col p-6 space-y-3\">\n            {/* Brand */}\n            {product.brand && (\n              <span className=\"text-xs font-semibold uppercase tracking-wider text-red-700\">\n                {product.brand.name}\n              </span>\n            )}\n\n            {/* Product Name */}\n            <h3 className=\"text-lg font-bold text-gray-900 leading-tight group-hover:text-red-700 transition-colors duration-300 line-clamp-2\">\n              {product.name}\n            </h3>\n\n            {/* Category */}\n            {product.category && (\n              <p className=\"text-sm text-gray-500\">\n                {product.category.name}\n              </p>\n            )}\n\n            {/* Short Description */}\n            {product.short_description && (\n              <p className=\"text-sm text-gray-600 leading-relaxed line-clamp-3\">\n                {product.short_description}\n              </p>\n            )}\n\n            {/* Spacer */}\n            <div className=\"flex-1\" />\n\n            {/* CTA Button */}\n            <button className=\"w-full px-6 py-3 bg-gradient-to-r from-red-900 to-red-700 text-white font-semibold uppercase tracking-wider hover:from-red-800 hover:to-red-600 transition-all duration-300 flex items-center justify-center gap-2 group-hover:gap-3\">\n              Request Quote\n              <svg\n                className=\"w-4 h-4\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M17 8l4 4m0 0l-4 4m4-4H3\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </Link>\n    </div>\n  )\n}\n\nexport default ProductCard\n"],"names":[],"mappings":"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"}