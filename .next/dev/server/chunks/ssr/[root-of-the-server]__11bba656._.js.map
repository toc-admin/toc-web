{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\nimport { Database } from '@/types/database.types'\n\nexport const createServerClient = async () => {\n  const cookieStore = await cookies()\n\n  return createClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options)\n            )\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAGO,MAAM,qBAAqB;IAChC,MAAM,cAAc,MAAM,IAAA,4JAAO;IAEjC,OAAO,IAAA,iNAAY,sUAGjB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/categories/%5Bslug%5D/CategoryListingClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,0RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+T,GAC5V,6FACA","ignoreList":[0]}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/categories/%5Bslug%5D/CategoryListingClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,0RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","ignoreList":[0]}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/categories/%5Bslug%5D/page.tsx"],"sourcesContent":["import { Metadata } from 'next'\nimport { notFound } from 'next/navigation'\nimport { createServerClient } from '@/lib/supabase/server'\nimport CategoryListingClient from './CategoryListingClient'\n\ninterface CategoryPageProps {\n  params: Promise<{\n    slug: string\n  }>\n  searchParams: Promise<{\n    page?: string\n    sort?: string\n    subcategory?: string\n    rooms?: string\n    features?: string\n  }>\n}\n\nasync function getCategoryData(slug: string) {\n  const supabase = await createServerClient()\n\n  // Fetch category with its subcategories\n  const { data: category, error: categoryError } = await supabase\n    .from('categories')\n    .select(`\n      id,\n      name,\n      slug,\n      description,\n      hero_image_url,\n      parent_id\n    `)\n    .eq('slug', slug)\n    .is('deleted_at', null)\n    .single()\n\n  if (categoryError || !category) {\n    console.error('Error fetching category:', categoryError)\n    return null\n  }\n\n  // Fetch subcategories (child categories)\n  const { data: subcategories } = await supabase\n    .from('categories')\n    .select('id, name, slug')\n    .eq('parent_id', category.id)\n    .is('deleted_at', null)\n    .order('name')\n\n  // Fetch products in this category\n  const { data: products, count } = await supabase\n    .from('products')\n    .select(`\n      id,\n      name,\n      slug,\n      sku,\n      short_description,\n      is_new,\n      is_featured,\n      brand:brands(id, name, slug, logo_url),\n      category:categories(id, name, slug),\n      product_images(id, image_url, thumbnail_url, is_primary, display_order),\n      product_features(id, feature_name),\n      product_colors(id, color_name, hex_code),\n      product_rooms(room:rooms(id, name, slug))\n    `, { count: 'exact' })\n    .eq('category_id', category.id)\n    .is('deleted_at', null)\n    .order('created_at', { ascending: false })\n\n  // Get all available rooms for filtering\n  const { data: availableRooms } = await supabase\n    .from('rooms')\n    .select('id, name, slug')\n    .is('deleted_at', null)\n    .order('name')\n\n  // Get unique features from products in this category for filtering\n  const { data: productFeatures } = await supabase\n    .from('product_features')\n    .select('feature_name')\n    .in('product_id', products?.map(p => p.id) || [])\n\n  const uniqueFeatures = [...new Set(productFeatures?.map(f => f.feature_name) || [])]\n\n  return {\n    category,\n    subcategories: subcategories || [],\n    products: products || [],\n    totalProducts: count || 0,\n    availableRooms: availableRooms || [],\n    availableFeatures: uniqueFeatures.sort()\n  }\n}\n\nexport async function generateMetadata({ params }: CategoryPageProps): Promise<Metadata> {\n  const { slug } = await params\n  const data = await getCategoryData(slug)\n\n  if (!data?.category) {\n    return {\n      title: 'Category Not Found | The Office Company',\n    }\n  }\n\n  const { category } = data\n\n  return {\n    title: `${category.name} | Premium Office Furniture | The Office Company`,\n    description: category.description || `Browse our selection of premium ${category.name.toLowerCase()} from world-class brands.`,\n    openGraph: {\n      title: `${category.name} | The Office Company`,\n      description: category.description || '',\n      images: category.hero_image_url ? [{\n        url: category.hero_image_url,\n        width: 1200,\n        height: 630,\n        alt: category.name\n      }] : [],\n      type: 'website',\n    },\n  }\n}\n\nexport default async function CategoryPage({ params, searchParams }: CategoryPageProps) {\n  const { slug } = await params\n  const data = await getCategoryData(slug)\n\n  if (!data?.category) {\n    notFound()\n  }\n\n  const search = await searchParams\n\n  return (\n    <CategoryListingClient\n      category={data.category}\n      subcategories={data.subcategories}\n      products={data.products}\n      totalProducts={data.totalProducts}\n      availableRooms={data.availableRooms}\n      availableFeatures={data.availableFeatures}\n      initialSearchParams={search}\n    />\n  )\n}\n"],"names":[],"mappings":"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"}}]
}