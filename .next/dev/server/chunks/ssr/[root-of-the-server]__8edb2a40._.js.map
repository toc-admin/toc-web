{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\nimport { Database } from '@/types/database.types'\n\nexport const createServerClient = async () => {\n  const cookieStore = await cookies()\n\n  return createClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options)\n            )\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAGO,MAAM,qBAAqB;IAChC,MAAM,cAAc,MAAM,IAAA,4JAAO;IAEjC,OAAO,IAAA,iNAAY,sUAGjB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/rooms/%5Bslug%5D/RoomListingClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/toc/app/rooms/[slug]/RoomListingClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/toc/app/rooms/[slug]/RoomListingClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,0RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsT,GACnV,oFACA","ignoreList":[0]}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/rooms/%5Bslug%5D/RoomListingClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/toc/app/rooms/[slug]/RoomListingClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/toc/app/rooms/[slug]/RoomListingClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,0RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA","ignoreList":[0]}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/rooms/%5Bslug%5D/page.tsx"],"sourcesContent":["import { Metadata } from 'next'\nimport { notFound } from 'next/navigation'\nimport { createServerClient } from '@/lib/supabase/server'\nimport RoomListingClient from './RoomListingClient'\n\ninterface RoomPageProps {\n  params: Promise<{\n    slug: string\n  }>\n  searchParams: Promise<{\n    sort?: string\n    categories?: string\n    subcategory?: string\n    brands?: string\n    page?: string\n  }>\n}\n\nasync function getRoomData(slug: string) {\n  const supabase = await createServerClient()\n\n  // Fetch room\n  const { data: room, error: roomError } = await supabase\n    .from('rooms')\n    .select(`\n      id,\n      name,\n      slug,\n      emoji,\n      description,\n      hero_image_url\n    `)\n    .eq('slug', slug)\n    .single()\n\n  if (roomError || !room) {\n    console.error('Error fetching room:', roomError)\n    return null\n  }\n\n  const roomId = (room as any).id\n\n  // Fetch products linked to this room via product_rooms junction table\n  const { data: products, count } = await supabase\n    .from('products')\n    .select(`\n      id,\n      name,\n      slug,\n      sku,\n      short_description,\n      subcategory,\n      is_new,\n      is_featured,\n      brand:brands(id, name, slug, logo_url),\n      category:categories(id, name, slug),\n      product_images(id, image_url, thumbnail_url, is_primary, display_order),\n      product_features(id, feature_name),\n      product_colors(id, color_name, hex_code),\n      product_rooms!inner(room_id)\n    `, { count: 'exact' })\n    .eq('product_rooms.room_id', roomId)\n    .is('deleted_at', null)\n    .order('created_at', { ascending: false })\n\n  // Get all available categories from products in this room for filtering\n  const productIds = products?.map((p: any) => p.id) || []\n  const { data: productCategories } = await supabase\n    .from('products')\n    .select('category:categories(id, name, slug)')\n    .in('id', productIds)\n    .not('category_id', 'is', null)\n\n  // Extract unique categories\n  const categoriesMap = new Map()\n  productCategories?.forEach((p: any) => {\n    if (p.category) {\n      categoriesMap.set(p.category.id, p.category)\n    }\n  })\n  const availableCategories = Array.from(categoriesMap.values()).sort((a: any, b: any) =>\n    a.name.localeCompare(b.name)\n  )\n\n  // Get unique subcategories from products in this room for filtering\n  const uniqueSubcategories = [\n    ...new Set(\n      products\n        ?.map((p: any) => p.subcategory)\n        .filter((subcategory: any) => subcategory !== null && subcategory !== '')\n    )\n  ].sort()\n\n  // Get unique brands from products in this room for filtering\n  const uniqueBrands = products\n    ?.map((p: any) => p.brand)\n    .filter((brand: any) => brand !== null)\n    .filter((brand: any, index: number, self: any[]) =>\n      index === self.findIndex((b: any) => b?.id === brand?.id)\n    )\n    .sort((a: any, b: any) => a.name.localeCompare(b.name)) || []\n\n  return {\n    room,\n    products: products || [],\n    totalProducts: count || 0,\n    availableCategories: availableCategories || [],\n    availableSubcategories: uniqueSubcategories,\n    availableBrands: uniqueBrands\n  }\n}\n\nexport async function generateMetadata({ params }: RoomPageProps): Promise<Metadata> {\n  const { slug } = await params\n  const data = await getRoomData(slug)\n\n  if (!data?.room) {\n    return {\n      title: 'Room Not Found | The Office Company',\n    }\n  }\n\n  const { room } = data as any\n\n  return {\n    title: `${room.name} Furniture | Premium Office Solutions | The Office Company`,\n    description: room.description || `Browse our curated selection of furniture perfect for ${room.name.toLowerCase()}.`,\n    openGraph: {\n      title: `${room.name} | The Office Company`,\n      description: room.description || '',\n      images: room.hero_image_url ? [{\n        url: room.hero_image_url,\n        width: 1200,\n        height: 630,\n        alt: room.name\n      }] : [],\n      type: 'website',\n    },\n  }\n}\n\nexport default async function RoomPage({ params, searchParams }: RoomPageProps) {\n  const { slug } = await params\n  const data = await getRoomData(slug)\n\n  if (!data?.room) {\n    notFound()\n  }\n\n  const search = await searchParams\n\n  return (\n    <RoomListingClient\n      room={data.room}\n      products={data.products}\n      totalProducts={data.totalProducts}\n      availableCategories={data.availableCategories}\n      availableSubcategories={data.availableSubcategories}\n      availableBrands={data.availableBrands}\n      initialSearchParams={search}\n    />\n  )\n}\n"],"names":[],"mappings":"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"}}]
}