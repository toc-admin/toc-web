{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\nimport { Database } from '@/types/database.types'\n\nexport const createServerClient = async () => {\n  const cookieStore = await cookies()\n\n  return createClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options)\n            )\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAGO,MAAM,qBAAqB;IAChC,MAAM,cAAc,MAAM,IAAA,4JAAO;IAEjC,OAAO,IAAA,iNAAY,sUAGjB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/categories/%5Bslug%5D/CategoryListingClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,0RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+T,GAC5V,6FACA","ignoreList":[0]}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/categories/%5Bslug%5D/CategoryListingClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/toc/app/categories/[slug]/CategoryListingClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,0RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","ignoreList":[0]}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///Users/brunocukic/Desktop/toc/app/categories/%5Bslug%5D/page.tsx"],"sourcesContent":["import { Metadata } from 'next'\nimport { notFound } from 'next/navigation'\nimport { createServerClient } from '@/lib/supabase/server'\nimport CategoryListingClient from './CategoryListingClient'\n\ninterface CategoryPageProps {\n  params: Promise<{\n    slug: string\n  }>\n  searchParams: Promise<{\n    sort?: string\n    subcategory?: string\n    rooms?: string\n    brands?: string\n  }>\n}\n\nasync function getCategoryData(slug: string) {\n  const supabase = await createServerClient()\n\n  // Fetch category\n  const { data: category, error: categoryError } = await supabase\n    .from('categories')\n    .select(`\n      id,\n      name,\n      slug,\n      description,\n      image_url\n    `)\n    .eq('slug', slug)\n    .single()\n\n  if (categoryError || !category) {\n    console.error('Error fetching category:', categoryError)\n    return null\n  }\n\n  const categoryId = (category as any).id\n\n  // Note: Subcategories not supported in current schema (no parent_id column)\n  const subcategories: any[] = []\n\n  // Fetch products in this category\n  const { data: products, count } = await supabase\n    .from('products')\n    .select(`\n      id,\n      name,\n      slug,\n      sku,\n      short_description,\n      subcategory,\n      is_new,\n      is_featured,\n      brand:brands(id, name, slug, logo_url),\n      category:categories(id, name, slug),\n      product_images(id, image_url, thumbnail_url, is_primary, display_order),\n      product_features(id, feature_name),\n      product_colors(id, color_name, hex_code),\n      product_rooms(room:rooms(id, name, slug))\n    `, { count: 'exact' })\n    .eq('category_id', categoryId)\n    .is('deleted_at', null)\n    .order('created_at', { ascending: false })\n\n  // Get all available rooms for filtering\n  const { data: availableRooms } = await supabase\n    .from('rooms')\n    .select('id, name, slug')\n    .order('name')\n\n  // Get unique subcategories from products in this category for filtering\n  const uniqueSubcategories = [\n    ...new Set(\n      products\n        ?.map((p: any) => p.subcategory)\n        .filter((subcategory: any) => subcategory !== null && subcategory !== '')\n    )\n  ].sort()\n\n  // Get unique brands from products in this category for filtering\n  const uniqueBrands = products\n    ?.map((p: any) => p.brand)\n    .filter((brand: any) => brand !== null)\n    .filter((brand: any, index: number, self: any[]) =>\n      index === self.findIndex((b: any) => b?.id === brand?.id)\n    )\n    .sort((a: any, b: any) => a.name.localeCompare(b.name)) || []\n\n  return {\n    category,\n    subcategories: subcategories || [],\n    products: products || [],\n    totalProducts: count || 0,\n    availableRooms: availableRooms || [],\n    availableSubcategories: uniqueSubcategories,\n    availableBrands: uniqueBrands\n  }\n}\n\nexport async function generateMetadata({ params }: CategoryPageProps): Promise<Metadata> {\n  const { slug } = await params\n  const data = await getCategoryData(slug)\n\n  if (!data?.category) {\n    return {\n      title: 'Category Not Found | The Office Company',\n    }\n  }\n\n  const { category } = data as any\n\n  return {\n    title: `${category.name} | Premium Office Furniture | The Office Company`,\n    description: category.description || `Browse our selection of premium ${category.name.toLowerCase()} from world-class brands.`,\n    openGraph: {\n      title: `${category.name} | The Office Company`,\n      description: category.description || '',\n      images: category.image_url ? [{\n        url: category.image_url,\n        width: 1200,\n        height: 630,\n        alt: category.name\n      }] : [],\n      type: 'website',\n    },\n  }\n}\n\nexport default async function CategoryPage({ params, searchParams }: CategoryPageProps) {\n  const { slug } = await params\n  const data = await getCategoryData(slug)\n\n  if (!data?.category) {\n    notFound()\n  }\n\n  const search = await searchParams\n\n  return (\n    <CategoryListingClient\n      category={data.category}\n      subcategories={data.subcategories}\n      products={data.products}\n      totalProducts={data.totalProducts}\n      availableRooms={data.availableRooms}\n      availableSubcategories={data.availableSubcategories}\n      availableBrands={data.availableBrands}\n      initialSearchParams={search}\n    />\n  )\n}\n"],"names":[],"mappings":"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"}}]
}